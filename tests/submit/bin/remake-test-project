#!/usr/bin/env python3

import argparse
from http import HTTPStatus
import synapseclient
from synapseclient import Project
from lrgasp.defs import validate_synapse_ident
from lrgasp.synapse_access import add_login_args, connect

def parse_args():
    desc = """Delete a test project if it exists, and then create.  Requires specifying --test_config_json"""
    parser = argparse.ArgumentParser(description=desc)
    add_login_args(parser)
    parser.add_argument("--debug", action='store_true',
                        help="print stack on any error")
    parser.add_argument("project_name",
                        help="synapse project name to remake")
    args = parser.parse_args()
    if args.test_config_json is None:
        parser.error("must specified --test_config_json")
    return args

def main(args):
    syn, syn_conf = connect(args)

    project_synid = syn.findEntityId(args.project_name)
    if project_synid is not None:
        syn.delete(project_synid)
    syn.store(Project(args.project_name))

main(parse_args())
